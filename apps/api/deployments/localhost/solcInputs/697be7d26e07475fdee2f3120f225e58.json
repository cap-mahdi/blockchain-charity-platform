{
  "language": "Solidity",
  "sources": {
    "src/services/blockchain/contracts/Association/Association.sol": {
      "content": "// SPDX-License-Identifier: MIT\npragma solidity 0.8.20;\n\ncontract AssociationContract {\n    // State variables to hold the association details\n    string public name;\n    string public description;\n    string public email;\n    string public phoneNumber;\n    string public country;\n    string public streetAddress;\n    string public city;\n    string public state;\n    string public postalCode;\n    uint256 public creationDate; // Custom creation date for the association\n    uint256 public size;\n\n    // Event to be emitted when the association contract is deployed\n    event AssociationContractDeployed(\n        string name,\n        string description,\n        string email,\n        string phoneNumber,\n        string country,\n        string streetAddress,\n        string city,\n        string state,\n        string postalCode,\n        uint256 creationDate,\n        uint256 size\n    );\n\n    // Constructor to initialize the association details\n    constructor(\n        string memory _name,\n        string memory _description,\n        string memory _email,\n        string memory _phoneNumber,\n        string memory _country,\n        string memory _streetAddress,\n        string memory _city,\n        string memory _state,\n        string memory _postalCode,\n        uint256 _creationDate, // Custom creation date parameter\n        uint256 _size\n            ) {\n        name = _name;\n        description = _description;\n        email = _email;\n        phoneNumber = _phoneNumber;\n        country = _country;\n        streetAddress = _streetAddress;\n        city = _city;\n        state = _state;\n        postalCode = _postalCode;\n        creationDate = _creationDate; // Assign custom creation date\n        size = _size;\n\n        emit AssociationContractDeployed(\n            _name,\n            _description,\n            _email,\n            _phoneNumber,\n            _country,\n            _streetAddress,\n            _city,\n            _state,\n            _postalCode,\n            _creationDate, // Emit custom creation date\n            _size\n        );\n    }\n\n    // Function to get the association details\n    function getAssociationDetails() public view returns (\n        string memory _name,\n        string memory _description,\n        string memory _email,\n        string memory _phoneNumber,\n        string memory _country,\n        string memory _streetAddress,\n        string memory _city,\n        string memory _state,\n        string memory _postalCode,\n        uint256 _creationDate,\n        uint256 _size\n    ) {\n        return (\n            name,\n            description,\n            email,\n            phoneNumber,\n            country,\n            streetAddress,\n            city,\n            state,\n            postalCode,\n            creationDate,\n            size\n        );\n    }\n}\n"
    },
    "src/services/blockchain/contracts/Association/AssociationFactory.sol": {
      "content": "// SPDX-License-Identifier: MIT\npragma solidity 0.8.20;\n\nimport \"./Association.sol\";\n\ncontract AssociationFactory {\n    event AssociationContractDeployed(address indexed associationContract, address indexed creator);\n\n    address public plateformAddress;\n\n    enum Status {\n        Active,\n        InActive\n    }\n\n    struct AssociationInfo {\n        address associationAddress;\n        Status status;\n    }\n\n    mapping(address => Status) public associations;\n    address[] public associationsArray;\n    uint public associationsCount;\n\n    constructor(address _plateformCAddress) {\n        plateformAddress = _plateformCAddress;\n    }\n\n    function getAssociationsWithStatus() public view returns (AssociationInfo[] memory) {\n        AssociationInfo[] memory associationInfoArray = new AssociationInfo[](associationsCount);\n        for (uint i = 0; i < associationsArray.length; i++) {\n            address associationAddress = associationsArray[i];\n            associationInfoArray[i] = AssociationInfo({\n                associationAddress: associationAddress,\n                status: associations[associationAddress]\n            });\n        }\n        return associationInfoArray;\n    }\n\n    function deployAssociationContract(\n        string memory _name,\n        string memory _description,\n        string memory _email,\n        string memory _phoneNumber,\n        string memory _country,\n        string memory _streetAddress,\n        string memory _city,\n        string memory _state,\n        string memory _postalCode,\n        uint256 _creationDate,\n        uint256 _size\n    ) external onlyAdmin returns (address) {\n        AssociationContract newContract = new AssociationContract(\n            _name,\n            _description,\n            _email,\n            _phoneNumber,\n            _country,\n            _streetAddress,\n            _city,\n            _state,\n            _postalCode,\n            _creationDate,\n            _size\n        );\n        associations[address(newContract)] = Status.Active;\n        associationsArray.push(address(newContract));\n        associationsCount++;\n\n        emit AssociationContractDeployed(address(newContract), msg.sender);\n\n        return address(newContract);\n    }\n\n    function setPlateformAddress(address _plateformAddress) external onlyAdmin {\n        plateformAddress = _plateformAddress;\n    }\n\n    function changeAssociationStatus(address _associationAddress, Status _status) external onlyAdmin {\n        associations[_associationAddress] = _status;\n    }\n\n    modifier onlyAdmin {\n        require(plateformAddress == msg.sender, \"Only admin can call this function\");\n        _;\n    }\n}\n"
    },
    "src/services/blockchain/contracts/Plateform.sol": {
      "content": "// SPDX-License-Identifier: MIT\npragma solidity ^0.8.7;\n\nimport \"./Association/AssociationFactory.sol\";\n\ncontract PlateformContract {\n    struct Association {\n        string name;\n        string description;\n        string email;\n        string phoneNumber;\n        string country;\n        string streetAddress;\n        string city;\n        string state;\n        string postalCode;\n        uint256 creationDate;\n        uint256 size;\n        string domain;\n    }\n\n    enum Status {\n        Pending,\n        Refused\n    }\n\n    struct Demand {\n        Association association;\n        address owner;\n        Status status;\n    }\n\n    Demand[] public demands;\n    address[] public admins;\n    AssociationFactory private associationFactory;\n\n    constructor() {\n        admins.push(msg.sender);\n    }\n\n    function getAllDemands() public view returns (Demand[] memory) {\n        return demands;\n    }\n\n    function setAssociationFactory(address _associationFactory) public onlyAdmin {\n        associationFactory =  AssociationFactory(_associationFactory);\n    }\n    function getAssociationFactory() public view returns (address) {\n        return address(associationFactory);\n    }\n\n    function addAdmin(address _admin) public onlyAdmin {\n        admins.push(_admin);\n    }\n\n    function refuseDemand(uint256 _index) public onlyAdmin {\n        demands[_index].status = Status.Refused;\n    }\n\n    function acceptDemand(uint256 _index) public onlyAdmin {\n        require(_index < demands.length, \"Demand index out of bounds\");\n        \n        Demand memory demandToRemove = demands[_index];\n        demands[_index] = demands[demands.length - 1];\n        demands.pop();\n\n        Association memory association = demandToRemove.association;\n        associationFactory.deployAssociationContract(\n            association.name,\n            association.description,\n            association.email,\n            association.phoneNumber,\n            association.country,\n            association.streetAddress,\n            association.city,\n            association.state,\n            association.postalCode,\n            association.creationDate,\n            association.size\n        );\n    }\n\n    function addDemand(\n        string memory _name,\n        string memory _description,\n        string memory _email,\n        string memory _phoneNumber,\n        string memory _country,\n        string memory _streetAddress,\n        string memory _city,\n        string memory _state,\n        string memory _postalCode,\n        uint256 _creationDate,\n        uint256 _size,\n        string memory _domain\n    ) public {\n        Association memory newAssociation = Association({\n            name: _name,\n            description: _description,\n            email: _email,\n            phoneNumber: _phoneNumber,\n            country: _country,\n            streetAddress: _streetAddress,\n            city: _city,\n            state: _state,\n            postalCode: _postalCode,\n            creationDate: _creationDate,\n            size: _size,\n            domain: _domain\n        });\n\n        Demand memory newDemand = Demand({\n            association: newAssociation,\n            owner: msg.sender,\n            status: Status.Pending\n        });\n\n        demands.push(newDemand);\n    }\n\n    function changeAssociationStatus(address _associationAddress, AssociationFactory.Status _status) public onlyAdmin {\n        associationFactory.changeAssociationStatus(_associationAddress, _status);\n    }\n\n    modifier onlyAdmin {\n        bool isAdmin = false;\n        for (uint i = 0; i < admins.length; i++) {\n            if (admins[i] == msg.sender) {\n                isAdmin = true;\n                break;\n            }\n        }\n\n        require(isAdmin, \"Only admins can call this function\");\n        _;\n    }\n}\n"
    }
  },
  "settings": {
    "optimizer": {
      "enabled": true,
      "runs": 100
    },
    "viaIR": true,
    "evmVersion": "paris",
    "outputSelection": {
      "*": {
        "*": [
          "abi",
          "evm.bytecode",
          "evm.deployedBytecode",
          "evm.methodIdentifiers",
          "metadata",
          "devdoc",
          "userdoc",
          "storageLayout",
          "evm.gasEstimates"
        ],
        "": [
          "ast"
        ]
      }
    },
    "metadata": {
      "useLiteralContent": true
    }
  }
}